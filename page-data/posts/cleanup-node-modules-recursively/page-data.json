{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/cleanup-node-modules-recursively/","webpackCompilationHash":"e32b132cce9852a9290d","result":{"data":{"markdownRemark":{"id":"64ded17c-e360-5bb3-ac57-6106385d35b0","html":"<p>A common situation of in learning modern WebDevelopment workflow is the constant accumulation of projects with aging/stale “node modules” directories.</p>\n<p>The node_modules folder is where your project dependencies are stored, common knowledge. Its weight is also common knowledge and most of the time is <strong>HUGE</strong></p>\n<p><img src=\"/media/npm_hole.png\" alt=\"NPM modules hole\"></p>\n<h3 id=\"print-out-a-list-of-directories-to-be-deleted\"><a href=\"#print-out-a-list-of-directories-to-be-deleted\" aria-label=\"print out a list of directories to be deleted permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Print out a list of directories to be deleted:</h3>\n<p>AKA Search&#x26;Destroy, but search first…</p>\n<p><code class=\"language-text\">find . -name &#39;node_modules&#39; -type d -prune</code></p>\n<h3 id=\"to-clear-all-node_modules-folders-from-current-folder-recursively\"><a href=\"#to-clear-all-node_modules-folders-from-current-folder-recursively\" aria-label=\"to clear all node_modules folders from current folder recursively permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>To clear all node_modules folders from current folder recursively:</h3>\n<p>This probably what you need to use</p>\n<p><code class=\"language-text\">find . -name &quot;node_modules&quot; -type d -prune -exec rm -vrf &#39;{}&#39; +</code></p>\n<h3 id=\"to-ignore-a-specific-subfolder\"><a href=\"#to-ignore-a-specific-subfolder\" aria-label=\"to ignore a specific subfolder permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>To ignore a specific subfolder:</h3>\n<p>In case you need something customized</p>\n<p><code class=\"language-text\">find . -name &quot;node_modules&quot; -type d -prune -not -path &quot;./folder-to-ignore/node_modules&quot; -exec rm -vrf &#39;{}&#39; +</code></p>\n<h3 id=\"eli5\"><a href=\"#eli5\" aria-label=\"eli5 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ELI5</h3>\n<p><code class=\"language-text\">find .</code> Instructs the find program to search for files in the current directory</p>\n<p><code class=\"language-text\">name &quot;node_modules&quot;</code> Instructs the find program to search for files named “node_modules”</p>\n<p><code class=\"language-text\">type d</code> Instructs the find program to only look for file directories named “node_modules”</p>\n<p><code class=\"language-text\">prune</code> Instructs the find program to not descend into the current file/directory for it to exclude child “node_modules” directories.</p>\n<p>On Mac, since -d was specified, -prune has no effect on the find program’s lookup results (per the man pages). However, on Linux, -prune still instructs the find program to not descend into the current file/directory</p>\n<p><code class=\"language-text\">exec rm -rf &#39;{}&#39; +</code> Instructs the find program to execute rm -rf on the matching results.</p>\n<p>The code ’{}’ + instructs the command line to be built by appending each selected file name at the end thus invoking the rm -rf command less times than the total number of “node_modules” directory matches. This helps with performance.</p>\n<h3 id=\"this-can-save-you-some-gb-over-several-projects-if-you-need-the-node-modules-back-you-can-simply-run-npm-install-again\"><a href=\"#this-can-save-you-some-gb-over-several-projects-if-you-need-the-node-modules-back-you-can-simply-run-npm-install-again\" aria-label=\"this can save you some gb over several projects if you need the node modules back you can simply run npm install again permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>This can save you some GB over several projects. If you need the node modules back, you can simply run <code class=\"language-text\">npm install</code> again</h3>\n<h3 id=\"bonus-use-rimraf\"><a href=\"#bonus-use-rimraf\" aria-label=\"bonus use rimraf permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bonus: use RimRaf</h3>\n<p>Install <a href=\"https://github.com/isaacs/rimraf\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">RimRaf</a> node util:\n]\n<code class=\"language-text\">npm install rimraf -g</code></p>\n<p>And in the project folder delete the node_modules folder with:</p>\n<p><code class=\"language-text\">rimraf node_modules</code></p>","fields":{"slug":"/posts/cleanup-node-modules-recursively/","tagSlugs":["/tag/node/","/tag/npm/","/tag/commandline/"],"categorySlug":"/category/npm/"},"frontmatter":{"date":"2019-04-21T21:00","description":"A solution to delete all node_modules folders recursively from a specified path using the command line interface.","tags":["Node","Npm","Commandline"],"title":"Cleanup Node Modules recursively","category":"Npm"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/cleanup-node-modules-recursively/"}}}