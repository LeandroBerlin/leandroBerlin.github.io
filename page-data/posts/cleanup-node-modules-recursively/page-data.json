{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/cleanup-node-modules-recursively/","webpackCompilationHash":"07bb4fd2a1e066cc4632","result":{"data":{"markdownRemark":{"id":"64ded17c-e360-5bb3-ac57-6106385d35b0","html":"<p>A common situation of in learning modern WebDevelopment workflow is the constant accumulation of projects with aging/stale “node modules” directories.</p>\n<p>The node_modules folder is where your project dependencies are stored, common knowledge. Its weight is also common knowledge and most of the time is <strong>HUGE</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/36167c4ecd577b44a5ade5b62e3ce8ea/5e6b6/npm_hole.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.91919191919192%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABzElEQVQoz42R+3KaQBTGfc88VV8g1UkzdSjEXLw0oZkaBKMxiNhqFJRw0YAXJMYWQRbI7mKmlzhtvj92vrN7fme/2U1tQHijOMXvq1LLLIkWUdfPW8aFOCrw+lHDIK7v6fb4szD6ZjyK6uyQVeDRGa9zd2YAQEqZuV875kIi29LgoruoDeza0JEnPzl5wcrIF9sTpm/Tnalmr3l1WRAnjLQo9+bzlZ+K4/hh/qjRe9JdNYiRhtMfnxrj2crDVVyR5vsVDRqYEa6X3dnHmgFNGEWppGPlRSCKI+ynSy/DqPAsxLWgOdTtGMG4rg7svGhCA0IM454ogjB2D0vvXVmLEYxqQd3CAUAlJ9sF0foFv/Db1Q3C5sRNgiXw0X9geM9vSoK8CY6w4j8FdwCaEjdR7NFuOMEcx+n3e4YxUpRhp9NVhoq/2STzBP3pWJwiOHwFw5CWZXFVLp1+n8lkcrncwYcDiqJkeWCaqKneG6fPBXxz+DcMACgW8iRJ0vQXlmVvGny9fs1UmKurcr5Ygk1wBN9s4e5wd2z1Xj07PT05OaYokiCIbDarG8b2A1+UvN+O1w6CwPO89Xrt+/7G913XhTsJiT8i+hf8Fr2GnwFhSQERxBmyZwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/36167c4ecd577b44a5ade5b62e3ce8ea/01472/npm_hole.webp 240w,\n/static/36167c4ecd577b44a5ade5b62e3ce8ea/222bd/npm_hole.webp 480w,\n/static/36167c4ecd577b44a5ade5b62e3ce8ea/620b9/npm_hole.webp 960w,\n/static/36167c4ecd577b44a5ade5b62e3ce8ea/6c11c/npm_hole.webp 990w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/36167c4ecd577b44a5ade5b62e3ce8ea/0783d/npm_hole.png 240w,\n/static/36167c4ecd577b44a5ade5b62e3ce8ea/782f4/npm_hole.png 480w,\n/static/36167c4ecd577b44a5ade5b62e3ce8ea/f570d/npm_hole.png 960w,\n/static/36167c4ecd577b44a5ade5b62e3ce8ea/5e6b6/npm_hole.png 990w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/36167c4ecd577b44a5ade5b62e3ce8ea/f570d/npm_hole.png\"\n          alt=\"NPM modules hole\"\n          title=\"NPM modules hole\"\n          loading=\"lazy\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<h3 id=\"print-out-a-list-of-directories-to-be-deleted\"><a href=\"#print-out-a-list-of-directories-to-be-deleted\" aria-label=\"print out a list of directories to be deleted permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Print out a list of directories to be deleted:</h3>\n<p>AKA Search&#x26;Destroy, but search first…</p>\n<p><code class=\"language-text\">find . -name &#39;node_modules&#39; -type d -prune</code></p>\n<h3 id=\"to-clear-all-node_modules-folders-from-current-folder-recursively\"><a href=\"#to-clear-all-node_modules-folders-from-current-folder-recursively\" aria-label=\"to clear all node_modules folders from current folder recursively permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>To clear all node_modules folders from current folder recursively:</h3>\n<p>This probably what you need to use</p>\n<p><code class=\"language-text\">find . -name &quot;node_modules&quot; -type d -prune -exec rm -vrf &#39;{}&#39; +</code></p>\n<h3 id=\"to-ignore-a-specific-subfolder\"><a href=\"#to-ignore-a-specific-subfolder\" aria-label=\"to ignore a specific subfolder permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>To ignore a specific subfolder:</h3>\n<p>In case you need something customized</p>\n<p><code class=\"language-text\">find . -name &quot;node_modules&quot; -type d -prune -not -path &quot;./folder-to-ignore/node_modules&quot; -exec rm -vrf &#39;{}&#39; +</code></p>\n<h3 id=\"eli5\"><a href=\"#eli5\" aria-label=\"eli5 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ELI5</h3>\n<p><code class=\"language-text\">find .</code> Instructs the find program to search for files in the current directory</p>\n<p><code class=\"language-text\">name &quot;node_modules&quot;</code> Instructs the find program to search for files named “node_modules”</p>\n<p><code class=\"language-text\">type d</code> Instructs the find program to only look for file directories named “node_modules”</p>\n<p><code class=\"language-text\">prune</code> Instructs the find program to not descend into the current file/directory for it to exclude child “node_modules” directories.</p>\n<p>On Mac, since -d was specified, -prune has no effect on the find program’s lookup results (per the man pages). However, on Linux, -prune still instructs the find program to not descend into the current file/directory</p>\n<p><code class=\"language-text\">exec rm -rf &#39;{}&#39; +</code> Instructs the find program to execute rm -rf on the matching results.</p>\n<p>The code ’{}’ + instructs the command line to be built by appending each selected file name at the end thus invoking the rm -rf command less times than the total number of “node_modules” directory matches. This helps with performance.</p>\n<h3 id=\"this-can-save-you-some-gb-over-several-projects-if-you-need-the-node-modules-back-you-can-simply-run-npm-install-again\"><a href=\"#this-can-save-you-some-gb-over-several-projects-if-you-need-the-node-modules-back-you-can-simply-run-npm-install-again\" aria-label=\"this can save you some gb over several projects if you need the node modules back you can simply run npm install again permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>This can save you some GB over several projects. If you need the node modules back, you can simply run <code class=\"language-text\">npm install</code> again</h3>\n<h3 id=\"bonus-use-rimraf\"><a href=\"#bonus-use-rimraf\" aria-label=\"bonus use rimraf permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bonus: use RimRaf</h3>\n<p>Install <a href=\"https://github.com/isaacs/rimraf\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">RimRaf</a> node util:\n]\n<code class=\"language-text\">npm install rimraf -g</code></p>\n<p>And in the project folder delete the node_modules folder with:</p>\n<p><code class=\"language-text\">rimraf node_modules</code></p>","fields":{"slug":"/posts/cleanup-node-modules-recursively/","tagSlugs":["/tag/node/","/tag/npm/","/tag/commandline/"],"categorySlug":"/category/npm/"},"frontmatter":{"date":"2019-04-21T21:00","description":"A solution to delete all node_modules folders recursively from a specified path using the command line interface.","tags":["Node","Npm","Commandline"],"title":"Cleanup Node Modules recursively","category":"Npm"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/posts/cleanup-node-modules-recursively/"}}}